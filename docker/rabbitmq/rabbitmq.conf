# RabbitMQ 配置文件
# 微博扫码登录桌面应用

# ==========================================
# 基础配置
# ==========================================
# 监听地址
listeners.tcp.default = 5672

# 管理界面端口
management.tcp.port = 15672

# 日志级别 (debug, info, warning, error, critical, none)
log.console.level = info
log.file.level = info

# ==========================================
# 内存和磁盘配置
# ==========================================
# 内存高水位阈值 (相对于可用内存的比例)
vm_memory_high_watermark.relative = 0.6

# 磁盘空闲空间阈值
disk_free_limit.absolute = 1GB

# ==========================================
# 消息持久化配置
# ==========================================
# 队列主节点定位策略
queue_master_locator = min-masters

# ==========================================
# 网络配置
# ==========================================
# 心跳间隔 (秒)
heartbeat = 60

# 帧最大大小
frame_max = 131072

# 通道最大数量
channel_max = 2047

# ==========================================
# 安全配置
# ==========================================
# 默认用户 (由环境变量设置)
# default_user = desktop_user
# default_pass = desktop_pass
# default_vhost = /weibo_desktop

# Loopback用户限制
loopback_users.guest = true

# ==========================================
# 管理界面配置
# ==========================================
# 启用管理插件
management.load_definitions = /etc/rabbitmq/definitions.json

# ==========================================
# 性能优化
# ==========================================
# 收集统计信息的粒度
collect_statistics_interval = 5000

# 管理界面统计数据保留时间 (毫秒)
management.sample_retention_policies.global.minute = 5
management.sample_retention_policies.global.hour = 60
management.sample_retention_policies.global.day = 1200

# ==========================================
# 集群配置 (单节点暂不启用)
# ==========================================
# cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config
